package com.amol.service;

import java.util.List;

import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;

import com.amol.binding.SsaRequest;
import com.amol.binding.SsaResponse;
import com.amol.entity.UserDetails;

@Service
public class AppServiceImpl implements AppService{

	@Override
	public String checkRIssn(Long ssn) {
		
			RestTemplate rt=new RestTemplate();
		  ResponseEntity<SsaResponse> rpe = rt.postForEntity(url, sr, SsaResponse.class);
			SsaResponse body = rpe.getBody();
			
			if(body!=null) {
				if(body.getStatename().equalsIgnoreCase("Rhode Island")) {
					CitizenEntity ce=new CitizenEntity();
					Integer num = ap.getNum();
					ce.setAppnumber(num);
					ce.setName(sr.getName());
					ce.setDob(sr.getDob());
					ce.setPname(sr.getPname());
					ce.setSsn(sr.getSsn());
					CitizenEntity save = crepo.save(ce);
					return save;
				}
			}
			return new CitizenEntity();
		}

		@Override
		public List<CitizenEntity> getApp() {
			// TODO Auto-generated method stub
			return crepo.findAll();
		}
		return null;
	}

	@Override
	public UserDetails getCreateApp(SsaRequest ssaReq) {
		
		return null;
	}

	@Override
	public List<UserDetails> getAllApp() {
		// TODO Auto-generated method stub
		return null;
	}
	
	

	
	

	}
